<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>墨枫个人博客</title><meta name="author" content="墨枫"><meta name="copyright" content="墨枫"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="墨枫个人笔记总结与分享">
<meta property="og:type" content="website">
<meta property="og:title" content="墨枫个人博客">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="墨枫个人博客">
<meta property="og:description" content="墨枫个人笔记总结与分享">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tse1-mm.cn.bing.net/th/id/OIP-C.Tli8rxBF2RBOpQg7cLTLIQHaHa?w=209&h=199&c=7&r=0&o=5&dpr=1.3&pid=1.7">
<meta property="article:author" content="墨枫">
<meta property="article:tag" content="墨枫 程序员墨枫 inkmaple">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tse1-mm.cn.bing.net/th/id/OIP-C.Tli8rxBF2RBOpQg7cLTLIQHaHa?w=209&h=199&c=7&r=0&o=5&dpr=1.3&pid=1.7"><link rel="shortcut icon" href="/%5Bobject%20Object%5D"><link rel="canonical" href="http://example.com/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 墨枫","link":"链接: ","source":"来源: 墨枫个人博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '墨枫个人博客',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-08-07 01:07:51'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/pageStyle.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="墨枫个人博客" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://tse1-mm.cn.bing.net/th/id/OIP-C.Tli8rxBF2RBOpQg7cLTLIQHaHa?w=209&amp;h=199&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">墨枫个人博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/01/12/%E4%B8%83%E3%80%81API-%E6%8E%A5%E5%8F%A3%E5%88%86%E6%9E%90%E5%8A%9F%E8%83%BD/" title="七、API 接口分析功能">七、API 接口分析功能</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-01-12T14:26:36.622Z" title="发表于 2023-01-12 22:26:36">2023-01-12</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/">API 开放平台</a></span></div><div class="content">七、API 接口分析功能主要内容：

开发抽象公共服务
实现网关核心业务流程
开发管理员接口分析功能
上线分析和发展

梳理网关业务流程一下操作可以复用：

实际情况应该是去数据库中查询是否已分配给用户秘钥（accessKey, secretKey 是否合法）
先根据 accessKey 判断用户是否存在，查到 secretKey
对比 secretKey 和用户传的加密后的 secretKey 是否一致


从数据库中查询模拟接口是否存在，以及请求方法是否匹配（还可以校验参数）
调用成功，接口调用次数 + 1 invokeCount

临时问题：如何获取接口转发服务器的地址思路：网关启动时，获取所有的接口信息，维护到内存的 hashmap 中；有请求时，根据请求的 URL 路径或其他参数（比如 host 请求头） 来判断应该转发到哪台服务器、以及用户校验接口是否存在
抽象公共服务项目名：mofeng-common
目的是让方法、实体类在多个项目之间复用，提高代码复用率。
服务抽取：

数据库中查询是否已分配给用户秘钥（根据 accessKey, 拿到用户信息，返回用户信息，为空表示不 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/01/03/%E5%85%AD%E3%80%81Dubbo-%E6%A1%86%E6%9E%B6/" title="六、Dubbo 框架">六、Dubbo 框架</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-01-03T07:11:51.910Z" title="发表于 2023-01-03 15:11:51">2023-01-03</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/">API 开放平台</a></span></div><div class="content">六、Dubbo 框架网关业务逻辑问题：网关项目比较纯净，没有操作数据库的包、并且还要调用我们之前写过的代码？复制粘贴维护麻烦
解决：直接请求到其他项目的方法
如何调用其他项目的方法
复制代码、依赖和环境
HTTP 请求（提供一个接口，供其他项目使用）
RPC
把公共的代码打包 JAR 包，其他项目引用（客户端 SDK）

HTTP 请求如何调用？
提供开发一个接口（地址、请求方法、参数、返回值）
调用方使用 HTTP Client 之类的代码包去发送 HTTP 请求

RPC作用：像本地方法一样调用远程方法

对开发者更透明，减少了很多的沟通 成本
RPC 想远程服务器发送请求时，未必要使用 HTTP 请求，比如还可以用 TCP&#x2F;IP，性能更高（内部服务更适用）


Dubbo 框架（RPC 实现）GRPC、TRPC
阅读官方文档：https://cn.dubbo.apache.org/zh/docs3-v2/java-sdk/quick-start/spring-boot/
两种使用方式：

Spring Boot 代码（注解 + 编程式）：写 Java 接口，服务提供者和 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/12/22/%E4%B8%89%E3%80%81API%20%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0-%E6%8E%A5%E5%8F%A3%E5%8F%91%E5%B8%83/" title="三、API 开放平台-接口发布">三、API 开放平台-接口发布</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-22T04:05:34.057Z" title="发表于 2022-12-22 12:05:34">2022-12-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/">API 开放平台</a></span></div><div class="content">三、接口发布-下线-调用
开发接口发布、下线的功能（管理员）
前端去浏览接口、查看接口文档、申请签名（注册）
在线调试（用户）
统计用户调用接口的次数
优化系统 - API 网关

开发接口发布&#x2F;下线功能后台接口：
发布接口（仅管理员可操作）

校验该接口是否存在
判断该接口是否可以调用
修改接口数据库中的状态字段为 1

下线接口（仅管理员可操作）

校验接口是否存在
修改接口数据库中的状态字段为 0

查看接口文档动态路由，用 url 来传递 id, 加载不同的接口信息
申请签名用户在注册成功时，自动分配 accessKey、secretKey 
扩展点：用户可以申请更换签名
在线调用123[    &#123;&quot;name&quot;:&quot;username&quot;, &quot;type&quot;:&quot;string&quot;&#125;]

先跑通整个接口流程，再去针对不同的请求头或者接口类型来设计界面和表单，给用户更好的体验。（可以参考 swagger、postman、knife4j)
调用流程
流程：

前端将用户输入的请求参数和要测 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/12/22/%E4%B8%80%E3%80%81API%20%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%E8%AE%BE%E8%AE%A1/" title="API 开放平台设计">API 开放平台设计</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-22T04:04:12.627Z" title="发表于 2022-12-22 12:04:12">2022-12-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/">API 开放平台</a></span></div><div class="content">API 开放平台第一期项目背景：

前端开发需要用到后端接口
使用现成的系统的功能（http://api.btstu.cn/）

API 接口平台：

防止攻击（安全性）
不能随便调用（限制、开通）
统计调用次数
计费
流量保护
API 接口

项目介绍做一个提供 API 接口调用的平台，用户可以注册登录，开通接口调用权限，用户可以使用接口，并且每次调用会进行统计。管理员可以发布接口、下线接口、接入接口，以及可视化接口的调用情况、数据。
技术选型前端
Ant Design Pro
React
Ant Design Procompoments
Umi
Umi Request (Axios 的封装)

后端
Java Spring Boot
Sring Boot Starter （SDK 开发）

项目计划第一期 —- 初始化展示项目介绍、设计、技术选型
基础项目搭建
接口管理
用户查看接口
第二期 —- 接口调用
继续开发接口管理前端页面
开发调用这个接口的代码
保证调用的安全性（API 签名认证）
客户端 SDK  的开发
管理员接口 发布 与调用
接口文档展示、接口在线调用

第三期 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/12/22/%E5%9B%9B%E3%80%81API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0-%E7%BD%91%E5%85%B3/" title="API 开放平台四-网关">API 开放平台四-网关</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-22T04:04:12.625Z" title="发表于 2022-12-22 12:04:12">2022-12-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/">API 开放平台</a></span></div><div class="content">四、网关
开发接口调用次数的设计
优化整个系统的架构（API 网关）
网关是什么？
网关的作用
网关的应用场景及实现
结合业务应用网关



接口调用次数统计需求：

用户每次调用接口成功，次数 + 1
给用户分配或者用户自主申请接口调用次数

业务流程：

用户调用接口
修改数据库，调用次数 + 1

设计库表：
哪个用户？哪个接口？
用户 &#x3D;&gt; 接口 （多对多关系）
用户调用接口关系表：
12345678910111213-- 用户调用接口关系表create table if not exists user_interface_info(    id            bigint auto_increment comment &#x27;id&#x27; primary key,    userId        bigint  comment &#x27;调用用户 id&#x27;,    interfaceInfoId        bigint  comment &#x27;接口 id&#x27;,    totalNum       int     d ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/12/22/%E4%BA%8C%E3%80%81API%20%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0-%E6%A8%A1%E6%8B%9F%E6%8E%A5%E5%8F%A3/" title="二、API 开放平台-模拟接口">二、API 开放平台-模拟接口</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-22T04:04:12.619Z" title="发表于 2022-12-22 12:04:12">2022-12-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/">API 开放平台</a></span></div><div class="content">二、API 开放平台-模拟接口模拟接口项目 mofeng-interface提供三个模拟接口

GET 接口
POST 接口（URL 传参）
POST 接口 （Restful)

调用接口几种 HTTP 调用方式：

HttpClient
RestTemplate
第三方库（OKHTTP、Hutool)

Hutool:https://hutool.cn/docs/#/
Http 工具类：https://hutool.cn/docs/#/http/Http%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%B7%A5%E5%85%B7%E7%B1%BB-HttpUtil
API 签名认证本质：

签名签发
使用签名（校验签名）

为什么需要签名认证？
保证安全性，防止恶意调用
如何实现 API 签名认证呢？通过 http request header 头传递参数

参数1： accessKey 调用的标识 userA, userB (复杂、无序、无规律)

参数2： secretKey 密钥 （复杂、无序、无规律），该参数不能放在请求头中
类似于用户名和密码，区别：acces ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/12/22/%E5%88%9B%E5%BB%BAstarter%E6%AD%A5%E9%AA%A4/" title="创建 starter 步骤">创建 starter 步骤</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-22T04:04:12.616Z" title="发表于 2022-12-22 12:04:12">2022-12-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/">API 开放平台</a></span></div><div class="content">创建starter步骤1.新建一个 spring boot 初始化项目
2.添加依赖，Lombok, Spring Configuration Processor
Spring Configuration Processor 的作用是自动生成代码提示
3.修改 pom 文件的版本号，并删除 build
​		
4.删除原本自动创建的主类，新建一个类, 并添加需要用到的依赖

5.在 resources 目录下新建 META-INF 目录，并创建 spring.factories 文件，并指定配置类的目录

6.install 打包构建在本地的仓库

7.复制 groupId, artifactId, version,可以在其他项目中添加为依赖


8.在配置文件当中就可以引用 starter 当中设置的属性

刚才在 starter 配置类中定义的属性

可以引入 starter 当中的类或者属性

</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/12/22/GateWay-%E8%BD%AC%E5%8F%91%E8%AF%B7%E6%B1%82/" title="GateWay 转发请求">GateWay 转发请求</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-22T04:04:12.611Z" title="发表于 2022-12-22 12:04:12">2022-12-22</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/">API 开放平台</a></span></div><div class="content">五、Gateway 转发请求使用到的特性
路由
负载均衡（需要用到注册中心）
统一鉴权
跨域
统一业务处理（缓存）
访问控制
发布控制
流量染色
接口保护
限制请求
信息脱敏
降级（熔断）
限流：学习令牌桶算法、学习漏桶算法，学习一下 RedisLimitHandler
超时时间


统一日志
统一文档

业务逻辑
用户发送请求到 API 网关
请求日志
（黑白名单）
用户鉴权（判断 accessKey, secretKey 是否合法）
请求的模拟接口是否存在
请求转发，调用模拟接口
响应日志
调用成功，次数 + 1
调用失败，返回一个规范的错误码

具体实现1.请求转发使用前缀匹配断言：https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#the-path-route-predicate-factory
所有路径为： &#x2F;api&#x2F;** 的请求进行转发，转发到 http://localhost:8123/api/**
比如请求网关： http://localhost:8090/ ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/12/08/%E7%BB%84%E9%98%9F%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1/" title="组队功能设计">组队功能设计</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-08T08:06:28.952Z" title="发表于 2022-12-08 16:06:28">2022-12-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BC%99%E4%BC%B4%E5%8C%B9%E9%85%8D%E7%B3%BB%E7%BB%9F/">伙伴匹配系统</a></span></div><div class="content">组队功能应用场景需要跟自己一起参加竞赛、做项目、学习，可以发起队伍或者加入别人的队伍
需求分析
用户可以创建队伍，设置队伍的人数、队伍名称（标题）、描述、超时时间 P0队长、剩余的人数
聊天
公开或私密或加密
用户最多创建 5 个队伍

展示队伍列表，根据名称搜索队伍 P0，信息流中不展示已过期的队伍

修改队伍信息  P0~P1

用户可以加入队伍（其他人、未满人、未过期），允许加入多个队伍，但是有上限 P0 

是否需要队长同意？筛选审批？

用户可以退出队伍（如果队长退出，权限转移给第二早加入的用户 – 先来先到）P1

队长可以解散队伍 P0

分享队伍 &#x3D;&gt; 邀请其他用户加入队伍 P1 
业务流程：（1）生成分享连接（分享二维码）（2）用户访问链接，可以点击加入


	
系统（接口）设计1.创建队伍用户可以创建队伍，设置队伍的人数、队伍名称（标题）、描述、超时时间 P0队长、剩余的人数
聊天
公开或私密或加密
用户最多创建 5 个队伍

请求参数是否为空
是否登录，为登录不允许创建
校验信息a. 队伍人数 &gt; 1 且 &lt;&#x3D; 20b. 队伍 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2022/12/08/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E8%AE%BE%E8%AE%A1/" title="数据库表设计">数据库表设计</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2022-12-08T08:06:28.949Z" title="发表于 2022-12-08 16:06:28">2022-12-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E4%BC%99%E4%BC%B4%E5%8C%B9%E9%85%8D%E7%B3%BB%E7%BB%9F/">伙伴匹配系统</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E4%BC%99%E4%BC%B4%E5%8C%B9%E9%85%8D%E7%B3%BB%E7%BB%9F/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></span></div><div class="content">数据库表设计队伍表 team字段：

id 主键 bigint （最简单、连续，放 URL 上比较简短，但缺点是爬虫）
name 队伍名称
decription 描述
maxNum 最大人数
expireTime 过期时间
userId 创建人
status 0 - 公开， 1- 私密， 2 - 加密
password 队伍密码
createTime 创建时间
updateTime 更新时间
isDelete 是否删除

用户-队伍表 user_team关系：

用户加入了哪些队伍？
队伍有哪些用户？

两种实现方式：

建立用户-队伍关系表 teamId userId （便于修改，查询性能高一点，不用全表遍历）
用户表补充已加入的队伍字段，队伍表补充已加入的用户字段（便于查询，不用写多对多连表查询代码，可以直接根据队伍查用户、根据用户查队伍）

字段：

id 主键
userId 用户 id
teamId 队伍 id
joinTime 加入时间
createTime 创建时间
updateTime 更新时间
isDelete 是否删除

为什么需要请求参数包装类？
请求参数名称 &# ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/#content-inner">5</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://tse1-mm.cn.bing.net/th/id/OIP-C.Tli8rxBF2RBOpQg7cLTLIQHaHa?w=209&amp;h=199&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">墨枫</div><div class="author-info__description">墨枫个人笔记总结与分享</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">43</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/lumofeng"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/lumofeng" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/08/07/%E8%8B%A5%E4%BE%9D%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" title="若依框架使用教程"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="若依框架使用教程"/></a><div class="content"><a class="title" href="/2023/08/07/%E8%8B%A5%E4%BE%9D%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/" title="若依框架使用教程">若依框架使用教程</a><time datetime="2023-08-06T17:07:30.562Z" title="发表于 2023-08-07 01:07:30">2023-08-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/07/%E8%8B%A5%E4%BE%9D%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/" title="若依生成代码"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="若依生成代码"/></a><div class="content"><a class="title" href="/2023/08/07/%E8%8B%A5%E4%BE%9D%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81/" title="若依生成代码">若依生成代码</a><time datetime="2023-08-06T17:07:30.558Z" title="发表于 2023-08-07 01:07:30">2023-08-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/08/07/%E8%8B%A5%E4%BE%9D%E6%95%B4%E5%90%88-ECharts/" title="若依整合 ECharts"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="若依整合 ECharts"/></a><div class="content"><a class="title" href="/2023/08/07/%E8%8B%A5%E4%BE%9D%E6%95%B4%E5%90%88-ECharts/" title="若依整合 ECharts">若依整合 ECharts</a><time datetime="2023-08-06T17:07:30.556Z" title="发表于 2023-08-07 01:07:30">2023-08-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/06/28/%E8%AF%BB%E3%80%8A%E4%BB%8A%E6%97%A5%E6%91%84%E5%BD%B1%E3%80%8B/" title="读《今日摄影》"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="读《今日摄影》"/></a><div class="content"><a class="title" href="/2023/06/28/%E8%AF%BB%E3%80%8A%E4%BB%8A%E6%97%A5%E6%91%84%E5%BD%B1%E3%80%8B/" title="读《今日摄影》">读《今日摄影》</a><time datetime="2023-06-27T16:21:53.105Z" title="发表于 2023-06-28 00:21:53">2023-06-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/03/%E4%B8%80%E3%80%81%E8%81%9A%E5%90%88%E6%90%9C%E7%B4%A2%E5%B9%B3%E5%8F%B0%E7%AE%80%E4%BB%8B/" title="一、聚合搜索平台简介"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="一、聚合搜索平台简介"/></a><div class="content"><a class="title" href="/2023/05/03/%E4%B8%80%E3%80%81%E8%81%9A%E5%90%88%E6%90%9C%E7%B4%A2%E5%B9%B3%E5%8F%B0%E7%AE%80%E4%BB%8B/" title="一、聚合搜索平台简介">一、聚合搜索平台简介</a><time datetime="2023-05-03T15:27:51.304Z" title="发表于 2023-05-03 23:27:51">2023-05-03</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/API-%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0/"><span class="card-category-list-name">API 开放平台</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/git/"><span class="card-category-list-name">git</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BC%99%E4%BC%B4%E5%8C%B9%E9%85%8D%E7%B3%BB%E7%BB%9F/"><span class="card-category-list-name">伙伴匹配系统</span><span class="card-category-list-count">11</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BC%99%E4%BC%B4%E5%8C%B9%E9%85%8D%E7%B3%BB%E7%BB%9F/redis/"><span class="card-category-list-name">redis</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E4%BC%99%E4%BC%B4%E5%8C%B9%E9%85%8D%E7%B3%BB%E7%BB%9F/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="card-category-list-name">数据库</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%A2%A8%E6%9E%AB%E7%9A%84%E8%AF%BB%E4%B9%A6%E6%84%9F%E6%83%B3/"><span class="card-category-list-name">墨枫的读书感想</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%BC%80%E6%BA%90%E7%BB%84%E4%BB%B6/"><span class="card-category-list-name">开源组件</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="card-category-list-name">数据库</span><span class="card-category-list-count">8</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/ECharts/" style="font-size: 1.1em; color: #999">ECharts</a> <a href="/tags/EasyExcel/" style="font-size: 1.1em; color: #999">EasyExcel</a> <a href="/tags/GitHub/" style="font-size: 1.1em; color: #999">GitHub</a> <a href="/tags/JSON/" style="font-size: 1.1em; color: #999">JSON</a> <a href="/tags/Mybatis/" style="font-size: 1.1em; color: #999">Mybatis</a> <a href="/tags/RabbitMQ/" style="font-size: 1.1em; color: #999">RabbitMQ</a> <a href="/tags/SQL/" style="font-size: 1.23em; color: #999ea6">SQL</a> <a href="/tags/Session/" style="font-size: 1.1em; color: #999">Session</a> <a href="/tags/bug/" style="font-size: 1.1em; color: #999">bug</a> <a href="/tags/redis/" style="font-size: 1.23em; color: #999ea6">redis</a> <a href="/tags/spring%E6%B3%A8%E8%A7%A3/" style="font-size: 1.1em; color: #999">spring注解</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.23em; color: #999ea6">分布式</a> <a href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" style="font-size: 1.23em; color: #999ea6">定时任务</a> <a href="/tags/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/" style="font-size: 1.23em; color: #999ea6">开源项目</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.23em; color: #999ea6">数据库</a> <a href="/tags/%E6%98%9F%E7%90%83%E9%A1%B9%E7%9B%AE/" style="font-size: 1.5em; color: #99a9bf">星球项目</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.1em; color: #999">算法</a> <a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 1.37em; color: #99a4b2">索引</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E6%84%9F%E6%83%B3/" style="font-size: 1.23em; color: #999ea6">读书感想</a> <a href="/tags/%E8%B7%A8%E5%9F%9F/" style="font-size: 1.1em; color: #999">跨域</a> <a href="/tags/%E9%94%81/" style="font-size: 1.1em; color: #999">锁</a> <a href="/tags/%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF/" style="font-size: 1.1em; color: #999">项目上线</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/04/"><span class="card-archive-list-date">四月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/02/"><span class="card-archive-list-date">二月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/01/"><span class="card-archive-list-date">一月 2023</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><span class="card-archive-list-count">29</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><span class="card-archive-list-count">2</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">43</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-08-06T17:07:51.260Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 墨枫</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>